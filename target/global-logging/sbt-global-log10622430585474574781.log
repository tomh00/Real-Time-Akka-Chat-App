[debug] > Exec(;clean ;compile ;test ;run, None, None)
[debug] > Exec(clean, None, None)
[debug] Evaluating tasks: clean
[debug] Running task... Cancel: Signal, check cycles: false, forcegc: true
[success] Total time: 1 s, completed Aug 20, 2023, 1:29:08 PM
[debug] > Exec(compile, None, None)
[debug] Evaluating tasks: Compile / compile
[debug] Running task... Cancel: Signal, check cycles: false, forcegc: true
[info] compiling 18 Scala sources to C:\Users\Administrator\Documents\scala-akka\target\scala-2.13\classes ...
[warn] 2 deprecations (since 2.13.3); re-run with -deprecation for details
[warn] one warning found
[info] done compiling
[success] Total time: 12 s, completed Aug 20, 2023, 1:29:21 PM
[debug] > Exec(test, None, None)
[debug] Evaluating tasks: Test / test
[debug] Running task... Cancel: Signal, check cycles: false, forcegc: true
[info] compiling 7 Scala sources to C:\Users\Administrator\Documents\scala-akka\target\scala-2.13\test-classes ...
[warn] C:\Users\Administrator\Documents\scala-akka\src\test\scala\ChatActorTest.scala:27:16: method without a parameter list overrides a method with a single empty one
[warn]   override def afterAll: Unit = {
[warn]                ^
[warn] 5 deprecations (since 2.13.3); re-run with -deprecation for details
[warn] two warnings found
[info] done compiling
[info] PasswordHasherTest:
[info] PasswordHasher
[info] - should hash and check passwords correctly
[info] - should return false for incorrect password check
[info] UserAuthenticationRoutesTest:
[info] chatapp.UserAuthenticationRoutesTest *** ABORTED ***
[info]   java.lang.NullPointerException: system must not be null!
[info]   at java.base/java.util.Objects.requireNonNull(Objects.java:259)
[info]   at akka.actor.ExtensionId.apply(Extension.scala:78)
[info]   at akka.actor.ExtensionId.apply$(Extension.scala:77)
[info]   at akka.stream.SystemMaterializer$.apply(SystemMaterializer.scala:32)
[info]   at akka.http.scaladsl.testkit.RouteTest.$init$(RouteTest.scala:52)
[info]   at chatapp.UserAuthenticationRoutesTest.<init>(UserAuthenticationRoutesTest.scala:13)
[info]   at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)
[info]   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
[info]   at java.base/java.lang.reflect.ReflectAccess.newInstance(ReflectAccess.java:128)
[info]   at java.base/jdk.internal.reflect.ReflectionFactory.newInstance(ReflectionFactory.java:306)
[info]   ...
[info] WebSocketRoutesTest:
[info] WebSocketRoutes
[info] chatapp.WebSocketRoutesTest *** ABORTED ***
[info]   java.lang.NoClassDefFoundError: akka/stream/testkit/TestSubscriber$
[info]   at akka.http.scaladsl.testkit.WSProbe$$anon$1.<init>(WSProbe.scala:107)
[info]   at akka.http.scaladsl.testkit.WSProbe$.apply(WSProbe.scala:106)
[info]   at chatapp.WebSocketRoutesTest.$anonfun$new$2(WebSocketRoutesTest.scala:26)
[info]   at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
[info]   at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
[info]   at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
[info]   at org.scalatest.Transformer.apply(Transformer.scala:22)
[info]   at org.scalatest.Transformer.apply(Transformer.scala:20)
[info]   at org.scalatest.wordspec.AnyWordSpecLike$$anon$3.apply(AnyWordSpecLike.scala:1240)
[info]   at org.scalatest.TestSuite.withFixture(TestSuite.scala:196)
[info]   ...
[info]   Cause: java.lang.ClassNotFoundException: akka.stream.testkit.TestSubscriber$
[info]   at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)
[info]   at sbt.internal.ManagedClassLoader.findClass(ManagedClassLoader.java:103)
[info]   at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)
[info]   at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
[info]   at akka.http.scaladsl.testkit.WSProbe$$anon$1.<init>(WSProbe.scala:107)
[info]   at akka.http.scaladsl.testkit.WSProbe$.apply(WSProbe.scala:106)
[info]   at chatapp.WebSocketRoutesTest.$anonfun$new$2(WebSocketRoutesTest.scala:26)
[info]   at org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)
[info]   at org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)
[info]   at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)
[info]   ...
[info] TokenUtilityTest:
[info] TokenUtility
[info] - should generate a valid token
[info] ChatActorTest:
[info] A ChatActor
[info] - should add user to the chat room on JoinChat message
[info] - should remove user from the chat room on LeaveChat message
[info] - should broadcast chat message to all users in the chat room
[info] RegistrationRoutesTest:
[info] chatapp.RegistrationRoutesTest *** ABORTED ***
[info]   java.lang.NullPointerException: system must not be null!
[info]   at java.base/java.util.Objects.requireNonNull(Objects.java:259)
[info]   at akka.actor.ExtensionId.apply(Extension.scala:78)
[info]   at akka.actor.ExtensionId.apply$(Extension.scala:77)
[info]   at akka.stream.SystemMaterializer$.apply(SystemMaterializer.scala:32)
[info]   at akka.http.scaladsl.testkit.RouteTest.$init$(RouteTest.scala:52)
[info]   at chatapp.RegistrationRoutesTest.<init>(RegistrationRoutesTest.scala:13)
[info]   at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)
[info]   at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)
[info]   at java.base/java.lang.reflect.ReflectAccess.newInstance(ReflectAccess.java:128)
[info]   at java.base/jdk.internal.reflect.ReflectionFactory.newInstance(ReflectionFactory.java:306)
[info]   ...
[info] UserManagerSpec:
[info] UserManager
[info] - should register a new user
[info] - should not register a user with the same username
[info] - should authenticate a registered user
[info] - should not authenticate a user with incorrect password
[error] Test suite chatapp.WebSocketRoutesTest failed with java.lang.NoClassDefFoundError: akka/stream/testkit/TestSubscriber$.
[error] This may be due to the ClassLoaderLayeringStrategy (ScalaLibrary) used by your task.
[error] To improve performance and reduce memory, sbt attempts to cache the class loaders used to load the project dependencies.
[error] The project class files are loaded in a separate class loader that is created for each test run.
[error] The test class loader accesses the project dependency classes using the cached project dependency classloader.
[error] With this approach, class loading may fail under the following conditions:
[error] 
[error]  * Dependencies use reflection to access classes in your project's classpath.
[error]    Java serialization/deserialization may cause this.
[error]  * An open package is accessed across layers. If the project's classes access or extend
[error]    jvm package private classes defined in a project dependency, it may cause an IllegalAccessError
[error]    because the jvm enforces package private at the classloader level.
[error] 
[error] These issues, along with others that were not enumerated above, may be resolved by changing the class loader layering strategy.
[error] The Flat and ScalaLibrary strategies bundle the full project classpath in the same class loader.
[error] To use one of these strategies, set the  ClassLoaderLayeringStrategy key
[error] in your configuration, for example:
[error] 
[error] set root / Test / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.ScalaLibrary
[error] set root / Test / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.Flat
[error] 
[error] See ClassLoaderLayeringStrategy.scala for the full list of options.
[info] Run completed in 4 seconds, 98 milliseconds.
[info] Total number of tests run: 10
[info] Suites: completed 4, aborted 3
[info] Tests: succeeded 10, failed 0, canceled 0, ignored 0, pending 0
[info] *** 3 SUITES ABORTED ***
[error] Error during tests:
[error] 	chatapp.RegistrationRoutesTest
[error] 	chatapp.WebSocketRoutesTest
[error] 	chatapp.UserAuthenticationRoutesTest
[error] (Test / test) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 10 s, completed Aug 20, 2023, 1:29:31 PM
[debug] > Exec(idea-shell, None, None)
[debug] > Exec(, None, None)
[debug] > Exec(idea-shell, None, None)
